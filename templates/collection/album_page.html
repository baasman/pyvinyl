{% extends "base.html" %}
{% block style %}
    <style>
        #tracklist {
            float: left;
            display: inline-block;
            list-style: none;
            margin: 0px 0;

        }

        #track {
            margin: 0px 0;
{#            line-height: 10px 0;#}
        }

        #nplays {
            border-style: solid;
            border-width: 1px;
            border-bottom-right-radius: 20px;
            right: 50px;
        }
    </style>
{% endblock %}

{% block content %}
    {% import "bootstrap/wtf.html" as wtf %}
    <div class="container">
        <h2>{{ record['title'] }}</h2>
        <small>{{ record['artists'][0] }}</small>
        <div class="row">
            <div class="col-xs-6 col-md-4">
                </br>
                <img src="{{ url_for('static', filename='tmp/%s' % filename) }}" alt="{{ record.title }}" style="width:300px;height:301.5px;">

            </div>
            <div class="col-xs-6 col-md-4">
                <h5>Tracklist</h5>
                <ul id="tracklist">
                    {% for track in record.track_data %}
                        {% if has_time %}
                            <li id="track">{{ '%s %s - %s' % (track.position, track.title, track.duration) }}</li>
                        {% else %}
                            <li id="track">{{ '%s %s' % (track.position, track.title) }}</li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>

                <div class="col-xs-6 col-md-4">
                        {% if current_user.is_authenticated %}
                            <form name="scrobble_form" class="form-horizontal" method="post" role="form">
                                {{ scrobble_form.hidden_tag() }}
                                {{ wtf.form_errors(scrobble_form, hiddens="only") }}

                                {{ wtf.form_field(scrobble_form.play_date) }}
                                {{ wtf.form_field(scrobble_form.submit,
                                                class='btn btn-success') }}
                                {{ wtf.form_field(scrobble_form.just_record_submit,
                                                class='btn btn-warning') }}
                            </form>
                            </br>
                            <p id="nplays">{{ 'Total plays by you: %d' % total_user_plays }}</p>
                            <p id="nplays">{{ 'Total plays on website: %d' % record['total_plays'] }}</p>
                            </br>
                            <form name="tag_form" class="form-horizontal" method="post" role="form">
                                {{ tag_form.hidden_tag() }}
                                {{ wtf.form_errors(tag_form, hiddens="only") }}

                                {{ wtf.form_field(tag_form.tag) }}
                                {{ wtf.form_field(tag_form.submit) }}
                            </form>
                        {% else %}
                            <p>Create an account to start scrobbling</p>
                        {% endif %}

                </div>
        </div>
        <div class="row">
        </div>
    </div>

    <script>
        $(document).ready(function(){
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>
{% endblock %}
